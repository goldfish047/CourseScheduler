<!DOCTYPE html>
<html>

<head>
    <title>Weekly Schedule</title>
    <style>
        table {
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            min-width: 15px;
        }
    </style>
</head>

<body>
    <div>
        <label for="mondayCheckbox">Monday</label>
        <input type="checkbox" id="mondayCheckbox" checked>
    </div>
    <div>
        <label for="tuesdayCheckbox">Tuesday</label>
        <input type="checkbox" id="tuesdayCheckbox" checked>
    </div>
    <div>
        <label for="wednesdayCheckbox">Wednesday</label>
        <input type="checkbox" id="wednesdayCheckbox" checked>
    </div>
    <div>
        <label for="thursdayCheckbox">Thursday</label>
        <input type="checkbox" id="thursdayCheckbox" checked>
    </div>
    <div>
        <label for="fridayCheckbox">Friday</label>
        <input type="checkbox" id="fridayCheckbox" checked>
    </div>
    <div>
        <label for="tbaCheckbox">TBA</label>
        <input type="checkbox" id="tbaCheckbox" checked>
    </div>

    <table id="scheduleTable">
        <thead>
            <tr>
                <th>Name</th>
                <th class="monday">Monday</th>
                <th class="tuesday">Tuesday</th>
                <th class="wednesday">Wednesday</th>
                <th class="thursday">Thursday</th>
                <th class="friday">Friday</th>
                <th class="tba">TBA</th>
            </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
    </table>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("course1.json")
                .then(response => response.json())
                .then(data => generateTable(data))
                .catch(error => console.log(error));
        });

        function generateTable(data) {
            const scheduleBody = document.getElementById("scheduleBody");
            const mondayCheckbox = document.getElementById("mondayCheckbox");
            const tuesdayCheckbox = document.getElementById("tuesdayCheckbox");
            const wednesdayCheckbox = document.getElementById("wednesdayCheckbox");
            const thursdayCheckbox = document.getElementById("thursdayCheckbox");
            const fridayCheckbox = document.getElementById("fridayCheckbox");
            const tbaCheckbox = document.getElementById("tbaCheckbox");

            const mondayColumn = document.querySelectorAll(".monday");
            const tuesdayColumn = document.querySelectorAll(".tuesday");
            const wednesdayColumn = document.querySelectorAll(".wednesday");
            const thursdayColumn = document.querySelectorAll(".thursday");
            const fridayColumn = document.querySelectorAll(".friday");
            const tbaColumn = document.querySelectorAll(".tba");

            function toggleColumnVisibility(checkbox, column) {
                checkbox.addEventListener("change", function () {
                    column.forEach(cell => {
                        cell.style.display = checkbox.checked ? "" : "none";
                    });

                    const columnIndex = Array.from(scheduleTable.rows[0].cells).indexOf(column[0]);

                    Array.from(scheduleTable.rows).forEach(row => {
                        const cell = row.cells[columnIndex];
                        cell.style.display = checkbox.checked ? "" : "none";
                    });
                });
            }

            toggleColumnVisibility(mondayCheckbox, mondayColumn);
            toggleColumnVisibility(tuesdayCheckbox, tuesdayColumn);
            toggleColumnVisibility(wednesdayCheckbox, wednesdayColumn);
            toggleColumnVisibility(thursdayCheckbox, thursdayColumn);
            toggleColumnVisibility(fridayCheckbox, fridayColumn);
            toggleColumnVisibility(tbaCheckbox, tbaColumn);

            data.forEach(entry => {
                const row = document.createElement("tr");
                const nameCell = document.createElement("td");
                nameCell.textContent = entry.Name;
                row.appendChild(nameCell);

                const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
                days.forEach(day => {
                    const cell = document.createElement("td");
                    const time = entry[`AM -- ${day}`] || entry[`PM -- ${day}`] || entry[`EVE -- ${day}`] || "";
                    const displayTime = time.replace(/(?:\s|^)\S*day(?:\s|$)/g, "");
                    cell.textContent = displayTime;
                    row.appendChild(cell);
                });

                const tbaCell = document.createElement("td");
                tbaCell.textContent = entry.TBA || "";
                row.appendChild(tbaCell);

                scheduleBody.appendChild(row);
            });
        }
    </script>
</body>

</html>
